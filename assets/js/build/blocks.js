(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,a=window.wp.htmlEntities,r=window.wc.wcSettings,i=window.wp.element,l=(0,r.getSetting)("paytrail_ppa_data",{}),p=(0,a.decodeEntities)(l.title)||"Paytrail",c=t=>{const{eventRegistration:a,emitResponse:r}=t,{onPaymentSetup:p}=a,[c,o]=(0,i.useState)((()=>localStorage.getItem("activePaytrailProvider")||""));return(0,i.useEffect)((()=>{localStorage.setItem("activePaytrailProvider",c);const e=p((async()=>({type:r.responseTypes.SUCCESS,meta:{paymentMethodData:{wc_paytrail_ppa_preselected_method:c}}})));return()=>{e()}}),[r.responseTypes.ERROR,r.responseTypes.SUCCESS,p,c]),"bypass"!=l.mode||0==l.providers||l.contains_subscription?(0,e.createElement)(n,null):(0,e.createElement)(d,{activeProvider:c,setActiveProvider:o})},n=t=>(0,e.createElement)("div",null,(0,e.createElement)(s,{display:"above"}),(0,e.createElement)(o,null),(0,e.createElement)(s,{display:"below"})),o=t=>{var r=(0,a.decodeEntities)(l.description||"");return 0===r.length?null:(0,e.createElement)("div",{className:"wc-paytrail-ppa-description"},r)},d=t=>(0,e.createElement)("div",null,(0,e.createElement)(s,{display:"above"}),(0,e.createElement)(o,null),(0,e.createElement)("div",{className:"wc-paytrail-ppa-methods-container wc-paytrail-blocks"},(0,e.createElement)("div",{className:"wc-paytrail-ppa-methods"},l.providers.map((a=>(0,e.createElement)(m,{group:a,setActiveProvider:t.setActiveProvider,activeProvider:t.activeProvider,key:a.id}))))),(0,e.createElement)(s,{display:"below"})),s=t=>{if(l.terms&&l.display_terms===t.display)return(0,e.createElement)("div",{className:"wc-paytrail-ppa-terms wc-paytrail-ppa-terms-"+t.display,dangerouslySetInnerHTML:{__html:l.terms}})},m=t=>"applepay"!==t.group.id||(0,i.useMemo)((()=>"undefined"!=typeof checkoutFinland&&!!checkoutFinland.applePayButton.canMakePayment()),[])?(0,e.createElement)("div",{className:"wc-paytrail-ppa-method-group wc-paytrail-ppa-method-group-"+t.group.id},(0,e.createElement)("div",{className:"wc-paytrail-ppa-method-group-title"},t.group.name),(0,e.createElement)("div",{className:"wc-paytrail-ppa-group-methods"},t.group.providers.map((a=>(0,e.createElement)(v,{provider:a,setActiveProvider:t.setActiveProvider,activeProvider:t.activeProvider,key:a.id}))))):null,v=t=>(0,e.createElement)("div",{className:"wc-paytrail-ppa-method "+(t.activeProvider===t.provider.id?"selected":""),onClick:()=>t.setActiveProvider(t.provider.id)},(0,e.createElement)("div",{className:"wc-paytrail-ppa-method-icon-container"},(0,e.createElement)("img",{src:t.provider.svg,alt:t.provider.name,className:"wc-paytrail-ppa-method-icon"})),(0,e.createElement)("input",{type:"radio",name:"wc_paytrail_ppa_preselected_method",value:t.provider.id,checked:t.activeProvider===t.provider.id,onChange:()=>t.setActiveProvider(t.provider.id)})),y={paymentMethodId:"paytrail_ppa",name:"paytrail_ppa",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:a}=t.components;return(0,e.createElement)(a,{text:p})}),null),content:(0,e.createElement)(c,null),edit:(0,e.createElement)(c,null),placeOrderButtonLabel:l.order_button_text,canMakePayment:()=>!0,ariaLabel:p,supports:{features:l.supports}};(0,t.registerPaymentMethod)(y)})();